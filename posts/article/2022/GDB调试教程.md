---
title: gdb调试教程
date:  2022-05-04 19:56:38
category: c++
description: GDB调试教程
---
本文主要介绍gdb相关的知识，[gdb官网](https://sourceware.org/gdb/)

## GDB功能

GDB目的是让你看到程序在执行时“内部”发生了什么——或者另一个程序在它崩溃的那一刻正在做什么。

一般来说，GDB主要帮助你完成下面四个方面的功能：

1. 启动你的程序，可以按照你的自定义的要求随心所欲的运行程序。
2. 可让被调试的程序在你所指定的调置的断点处停住。
3. 当程序被停住时，可以检查此时你的程序中所发生的事。
4. 你可以改变你的程序，将一个BUG产生的影响修正从而测试其他BUG。        ·1    

## GDB的使用

使用gdb调试的程序需要在编译时加入-g 参数，例如：gcc -g -o hallo ./hallo.c

1. 启动gdb 

   gdb ./hallo 启动成功时输出如下信息:

   ![image-20220504203419742](/static/articleImage/2022/image-20220504203419742.png)
   
1. 设置断点

   在启动调试之前需要设置断点，设置断点使用break（缩写b），设置断点的语法：

   | 语法                        | 说明                                                         |
   | --------------------------- | ------------------------------------------------------------ |
   | break location              | 在源码的location行位置设置断点，例如:break 10在第10行位置处设置断点 |
   | break fun                   | 在fun函数出设置断点，例如：break main在main函数处设置断点    |
   | clear location              | 清理location位置处设置的断点                                 |
   | save breakpoints [filename] | 由于设置断点信息仅用于本次会话，因此可以保存断点信息到文件，以便于下次使用时不用重新设置 |
   | info break                  | 查看设置的断点                                               |
   
1. 启动调试以及执行

   启动调试之前需要执行run（缩写r）命令开始执行程序。执行run命令之后程序会运行至设置的第一个断点。接下来执行可以分为二种方法：

   1. 执行下一行的命令为next（缩写n）或者step（缩写s），next和step的区别为当遇到函数时step进入函数内部并单步执行每一行代码而next则不进入函数单步执行
   2. 执行到下一个断点的命令为continue（缩写c）
   
1. 查看内存以及寄存器的值

   使用print（缩写p），例如查看x查看的值：print x

   
   
   - 查看寄存器的值
   
     info registers
   
   - 查看os信息
   
     Info os type type 可以通过info os 查看可用的类型
   
1. tui方式查看

   GDB文本用户界面 (TUI) 是一个终端界面，它使用库 在单独的文本窗口`curses`中显示源文件、汇编输出、程序寄存器和GDB命令。

   tui可以展示这几个窗口：命令，源码，汇编，寄存器
   
   启动tui的命令tui enable，可以使用tui layout splint展示源码窗户以及汇编窗户
   
   在tui窗口可以看到当前执行的行（以深色背景标识）以及设置的断点
   
1. 其他辅助命令

   | 命令 <div style="width:150px" /> | 说明                                                         |
   | ----------------- | ------------------------------------------------------- |
   | help（h）     | 列出所有的命令                                               |
   | quit（缩写q） | 退出调试                                                     |
   | info（缩写i） | 该命令（缩写`i`）用于描述程序的状态。例如，您可以使用 显示传递给函数的参数`info args`，使用 列出当前使用的寄存器`info registers`，或者使用 列出您设置的断点`info breakpoints` |
   | show | 与 相比`info`，`show`用于描述 GDB本身的状态。 |
   |               |                                                              |
   
   
   
7. 其他







