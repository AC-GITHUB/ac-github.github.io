import{_ as s}from"./plugin-vue_export-helper.21dcd24c.js";import{e as n}from"./app.aab1f085.js";const a={},l=n(`<h2 id="springcontext-\u7684\u542F\u52A8\u6D41\u7A0B\u6E90\u7801" tabindex="-1"><a class="header-anchor" href="#springcontext-\u7684\u542F\u52A8\u6D41\u7A0B\u6E90\u7801" aria-hidden="true">#</a> springcontext \u7684\u542F\u52A8\u6D41\u7A0B\u6E90\u7801</h2><p>springcontext\u542F\u52A8\u7684\u6D41\u7A0B\u90FD\u5728AbstractApplicationContext\u7C7B\u7684refresh()\u4E2D</p><div class="language-java ext-java line-numbers-mode"><pre class="shiki" style="background-color:#292D3E;"><code><span class="line"><span style="color:#C792EA;">public</span><span style="color:#A6ACCD;"> </span><span style="color:#C792EA;">void</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">refresh</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> throws BeansException</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> IllegalStateException </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#C792EA;">Object</span><span style="color:#A6ACCD;"> var1 </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">startupShutdownMonitor</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">//\u83B7\u53D6\u76D1\u63A7\u9501\u9632\u6B62\u591A\u6B21\u542F\u52A8</span></span>
<span class="line"><span style="color:#A6ACCD;">       </span><span style="color:#C792EA;">synchronized</span><span style="color:#89DDFF;">(this.</span><span style="color:#A6ACCD;">startupShutdownMonitor</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">		</span><span style="color:#676E95;font-style:italic;">//\u521D\u59CB\u5316\u5904\u7406\u73AF\u5883\u53D8\u91CF</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">prepareRefresh</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">//\u521B\u5EFAbeanFactory\uFF0C\u5B9E\u73B0\u7C7BDefaultListableBeanFactory,\u5E76\u52A0\u8F7Dbean\u5B9A\u4E49\u5230beanFactory</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#C792EA;">ConfigurableListableBeanFactory</span><span style="color:#A6ACCD;"> beanFactory </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">obtainFreshBeanFactory</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">			</span><span style="color:#676E95;font-style:italic;">//\u8BBE\u7F6EbeanFactory\u9700\u8981\u7684\u53C2\u6570</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">prepareBeanFactory</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">postProcessBeanFactory</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    			</span><span style="color:#676E95;font-style:italic;">//\u8C03\u7528\u5E76\u6267\u884C\u6240\u6709\u7684BeanFactoryPostProcessors</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">invokeBeanFactoryPostProcessors</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    			</span><span style="color:#676E95;font-style:italic;">//\u5411beanFactory\u6CE8\u518C\u6240\u6709\u7684BeanPostProcessor</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">registerBeanPostProcessors</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    			</span><span style="color:#676E95;font-style:italic;">//\u521D\u59CB\u5316MessageSource\u7C7B</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">initMessageSource</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    			</span><span style="color:#676E95;font-style:italic;">//\u521D\u59CB\u5316\u6CE8\u518CApplicationEventMulticaster</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">initApplicationEventMulticaster</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">onRefresh</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    			</span><span style="color:#676E95;font-style:italic;">//\u5904\u7406ApplicationListener</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">registerListeners</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#89DDFF;">    			</span><span style="color:#676E95;font-style:italic;">//\u5B8C\u6210\u521D\u59CB\u5316\uFF0C\u5E76\u5904\u7406\u975E\u61D2\u52A0\u8F7D\u7684\u5355\u4F8Bbean</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">finishBeanFactoryInitialization</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">beanFactory</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#89DDFF;">    			</span><span style="color:#676E95;font-style:italic;">//\u6267\u884CLifecycleProcessor,\u6267\u884CApplicationEvent</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">finishRefresh</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">catch</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">BeansException</span><span style="color:#A6ACCD;"> var9</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(this.</span><span style="color:#A6ACCD;">logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">isWarnEnabled</span><span style="color:#89DDFF;">())</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                    </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">warn</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Exception encountered during</span></span>
<span class="line"><span style="color:#C3E88D;">    				context initialization - cancelling refresh</span></span>
<span class="line"><span style="color:#C3E88D;">    				attempt: </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> var9</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">destroyBeans</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">cancelRefresh</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;">var9</span><span style="color:#89DDFF;">);</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">throw</span><span style="color:#A6ACCD;"> var9</span><span style="color:#89DDFF;">;</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">finally</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;">this.</span><span style="color:#82AAFF;">resetCommonCaches</span><span style="color:#89DDFF;">();</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;">}</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div>`,3);function p(o,e){return l}var c=s(a,[["render",p],["__file","spring-context\u542F\u52A8\u6D41\u7A0B.html.vue"]]);export{c as default};
